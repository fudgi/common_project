-- phpMyAdmin SQL Dump
-- version 4.8.3
-- https://www.phpmyadmin.net/
--
-- Host: localhost:3306
-- Generation Time: Jan 22, 2019 at 03:48 AM
-- Server version: 5.7.23
-- PHP Version: 7.2.8

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

--
-- Database: `Rething`
--

-- --------------------------------------------------------

--
-- Table structure for table `category`
--

CREATE TABLE `category` (
  `category_id` bigint(20) UNSIGNED NOT NULL,
  `category_name` varchar(40) COLLATE utf8_unicode_ci NOT NULL,
  `datestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `category`
--

INSERT INTO `category` (`category_id`, `category_name`, `datestamp`) VALUES
(1, 'Все', '2019-01-08 16:15:19'),
(2, 'Транспорт', '2019-01-08 16:15:19'),
(3, 'Бытовая электроника', '2019-01-08 16:18:00'),
(4, 'Аудио и видео', '2019-01-08 16:18:00'),
(5, 'Личные вещи', '2019-01-08 16:18:00'),
(6, 'Хобби и отдых', '2019-01-08 16:18:00'),
(7, 'Фототехника', '2019-01-08 16:18:00'),
(8, 'Для дома и дачи', '2019-01-08 16:18:00'),
(9, 'Товары для компьютера', '2019-01-08 16:18:00'),
(10, 'Разное', '2019-01-08 16:18:00');

-- --------------------------------------------------------

--
-- Table structure for table `request_data`
--

CREATE TABLE `request_data` (
  `request_id` bigint(20) UNSIGNED NOT NULL,
  `creator_user_id` bigint(20) UNSIGNED DEFAULT NULL,
  `request_title` varchar(40) COLLATE utf8_unicode_ci NOT NULL,
  `request_whenDate` datetime NOT NULL,
  `request_tillDate` datetime NOT NULL,
  `request_price` decimal(20,2) UNSIGNED DEFAULT NULL,
  `request_description` text COLLATE utf8_unicode_ci NOT NULL,
  `request_location` varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL,
  `request_state` tinyint(1) UNSIGNED DEFAULT NULL,
  `request_confirmed_responder` bigint(20) UNSIGNED DEFAULT NULL,
  `request_timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `category_id` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `request_data`
--

INSERT INTO `request_data` (`request_id`, `creator_user_id`, `request_title`, `request_whenDate`, `request_tillDate`, `request_price`, `request_description`, `request_location`, `request_state`, `request_confirmed_responder`, `request_timestamp`, `category_id`) VALUES
(2, 2, 'Карета', '2018-11-20 23:25:00', '2018-11-24 02:00:00', '5000.00', 'Покататься', 'Зимний дворец', 1, NULL, '2018-11-17 07:49:18', 2),
(4, 2, 'Муза', '2018-11-21 00:00:00', '2018-11-29 00:00:00', '2000.00', 'Позовите модератора', 'Домой', 1, NULL, '2018-11-17 07:57:58', 8),
(5, 4, 'Ручка перьевая', '2019-01-09 00:00:00', '2019-01-11 00:00:00', '200.00', 'Сущий пустячок', 'Покровский бульвар, 4', NULL, NULL, '2019-01-08 18:03:11', 5),
(6, 7, 'Дрель, скорее', '2019-01-15 00:00:00', '2019-01-17 00:00:00', '500.00', 'Мощная дрель для соседей', 'Петровка, 5', NULL, NULL, '2019-01-08 18:04:11', 3),
(7, 9, 'Храбрость', '2019-01-21 00:00:00', '2019-01-28 00:00:00', '5000.00', 'Хочу быть храбрым', 'Карла Маркса, 21', NULL, NULL, '2019-01-08 18:11:09', 5),
(8, 9, 'Мозги', '2019-01-21 00:00:00', '2019-01-28 00:00:00', '456.00', 'Хочу быть умным', 'Изумрудный город', NULL, NULL, '2019-01-08 18:12:03', 5),
(9, 8, 'Лопата совковая', '2019-01-23 00:00:00', '2019-01-24 00:00:00', '200.00', 'Выкопать картошку', 'сады Березка', NULL, NULL, '2019-01-22 01:52:07', 8),
(10, 8, 'Газель', '2019-01-28 00:00:00', '2019-01-24 00:00:00', '2000.00', 'Переезжаю', 'В черте города', NULL, NULL, '2019-01-22 01:52:07', 2);

-- --------------------------------------------------------

--
-- Table structure for table `request_respond_data`
--

CREATE TABLE `request_respond_data` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `request_id` bigint(20) UNSIGNED NOT NULL,
  `user_id` bigint(20) UNSIGNED NOT NULL COMMENT 'Отвечающий',
  `price` decimal(20,2) NOT NULL,
  `respond_text` text COLLATE utf8_unicode_ci,
  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `request_respond_data`
--

INSERT INTO `request_respond_data` (`id`, `request_id`, `user_id`, `price`, `respond_text`, `timestamp`) VALUES
(19, 6, 9, '4.00', 'def', '2019-01-20 18:15:20'),
(20, 5, 9, '3.00', 'cox', '2019-01-20 18:17:30'),
(22, 8, 4, '200.00', 'У меня есть', '2019-01-22 02:12:56');

-- --------------------------------------------------------

--
-- Table structure for table `user_data`
--

CREATE TABLE `user_data` (
  `user_id` bigint(20) UNSIGNED NOT NULL,
  `username` varchar(25) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Имя_Фамилия',
  `password` varchar(25) COLLATE utf8_unicode_ci NOT NULL,
  `email` varchar(40) COLLATE utf8_unicode_ci NOT NULL,
  `telephone` varchar(15) COLLATE utf8_unicode_ci DEFAULT NULL,
  `photo` text COLLATE utf8_unicode_ci COMMENT 'Ссылка на фото',
  `gender` tinyint(1) UNSIGNED DEFAULT NULL COMMENT '1_М, 0_Ж',
  `birth_date` date DEFAULT NULL,
  `state` tinyint(1) UNSIGNED DEFAULT NULL COMMENT 'null_неАктивирован, 1_активирован, 0_блок',
  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `user_data`
--

INSERT INTO `user_data` (`user_id`, `username`, `password`, `email`, `telephone`, `photo`, `gender`, `birth_date`, `state`, `timestamp`) VALUES
(1, 'Александр Пушкин', '123', 'niggers_adventure@mail.ru', '+(955)732-43-24', NULL, NULL, NULL, NULL, '2018-11-17 07:41:20'),
(2, 'Петр Первый', '123', 'piter@mail.ru', '+(955)724-32-45', '/react-common/my-app/src/img/petr.jpg', NULL, NULL, NULL, '2018-11-17 07:46:51'),
(3, 'Каретчик ВсеяРуси', '123', 'invalid1@mail.ru', '+(955)798-76-43', NULL, NULL, NULL, NULL, '2018-11-17 08:00:12'),
(4, 'Марина Цветаева', '123', 'ya_poet@mail.ru', '+(955)712-12-12', '/react-common/my-app/src/img/Tsvetaeva.jpg', NULL, NULL, NULL, '2018-11-17 08:01:17'),
(7, 'Алина Краснова', '123', 'alina@mail.ru', '+(955)243-34-54', '/react-common/my-app/src/img/avatar-girl.svg', NULL, NULL, NULL, '2019-01-08 16:39:43'),
(8, 'Андрей Кораблев', '123', 'korabl@mail.ru', '+(955)342-43-23', '/react-common/my-app/src/img/avatar-man-2.svg', NULL, NULL, NULL, '2019-01-08 16:40:44'),
(9, 'Миша Смирнов', '123', 'viha@mail.ru', '+(955)243-43-76', '/react-common/my-app/src/img/avatar-man-1.svg', NULL, NULL, NULL, '2019-01-08 18:07:07');

--
-- Indexes for dumped tables
--

--
-- Indexes for table `category`
--
ALTER TABLE `category`
  ADD UNIQUE KEY `category_id` (`category_id`),
  ADD UNIQUE KEY `category_name` (`category_name`);

--
-- Indexes for table `request_data`
--
ALTER TABLE `request_data`
  ADD PRIMARY KEY (`request_id`),
  ADD UNIQUE KEY `request_id` (`request_id`),
  ADD KEY `user_id` (`creator_user_id`),
  ADD KEY `request_confirmed_responder` (`request_confirmed_responder`);

--
-- Indexes for table `request_respond_data`
--
ALTER TABLE `request_respond_data`
  ADD UNIQUE KEY `id` (`id`),
  ADD KEY `user_id` (`user_id`),
  ADD KEY `request_id` (`request_id`);

--
-- Indexes for table `user_data`
--
ALTER TABLE `user_data`
  ADD PRIMARY KEY (`user_id`),
  ADD UNIQUE KEY `user_id` (`user_id`),
  ADD UNIQUE KEY `email` (`email`);

--
-- AUTO_INCREMENT for dumped tables
--

--
-- AUTO_INCREMENT for table `category`
--
ALTER TABLE `category`
  MODIFY `category_id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=11;

--
-- AUTO_INCREMENT for table `request_data`
--
ALTER TABLE `request_data`
  MODIFY `request_id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=24;

--
-- AUTO_INCREMENT for table `request_respond_data`
--
ALTER TABLE `request_respond_data`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=24;

--
-- AUTO_INCREMENT for table `user_data`
--
ALTER TABLE `user_data`
  MODIFY `user_id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=10;

--
-- Constraints for dumped tables
--

--
-- Constraints for table `request_data`
--
ALTER TABLE `request_data`
  ADD CONSTRAINT `request_data_ibfk_1` FOREIGN KEY (`request_confirmed_responder`) REFERENCES `user_data` (`user_id`) ON DELETE NO ACTION ON UPDATE CASCADE,
  ADD CONSTRAINT `request_data_ibfk_2` FOREIGN KEY (`creator_user_id`) REFERENCES `user_data` (`user_id`) ON DELETE NO ACTION ON UPDATE CASCADE;

--
-- Constraints for table `request_respond_data`
--
ALTER TABLE `request_respond_data`
  ADD CONSTRAINT `request_respond_data_ibfk_1` FOREIGN KEY (`request_id`) REFERENCES `request_data` (`request_id`) ON DELETE NO ACTION ON UPDATE CASCADE,
  ADD CONSTRAINT `request_respond_data_ibfk_2` FOREIGN KEY (`user_id`) REFERENCES `user_data` (`user_id`) ON DELETE NO ACTION ON UPDATE CASCADE;
